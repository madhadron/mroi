(define-namespace ij "class:ij.IJ")

(define (make-mroi-window imp canvas)
  (object (<ij.gui.StackWindow> 
	   <java.awt.event.AdjustmentListener>)
	  (allocation: 'class init: (invoke-special <ij.gui.StackWindow> '*init* imp canvas))
	  (imp type: <ij.ImagePlus> access: 'public)
	  (canvas type: <mroi.MroiCanvas> access: 'public)
	  ((adjustmentValueChanged (e :: <java.awt.event.AdjustmentEvent>))
	   (invoke-special <ij.gui.StackWindow> 'adjustmentValueChanged e)
	   (<mroi.State>:goToFrameOn (:. state canvas) null imp))
	  ((mouseWheelMoved (evt :: <java.awt.event.MouseWheelEvent>))
	   (invoke-special <ij.gui.StackWindow> 'mouseWheelMoved evt)
	   (<mroi.State>:goToFrameOn (:. state.canvas) null imp))))
  
(let ((img (<ij.IJ>:getImage))
      (canvas (<mroi.MroiCanvas> imp)))
  (make-mroi-window imp canvas))
  


